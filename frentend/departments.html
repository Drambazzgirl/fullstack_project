<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Department - Voice of TN</title>
    <link rel="stylesheet" href="./css/departments.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo">ðŸ”Š Voice of TN</div>
        <div class="nav-links">
            <a href="../index.html">Home</a>
            <a href="./profile.html">Profile</a>
            <a href="#" onclick="logout()">Logout</a>
        </div>
    </nav>

    <div class="container">
        <div class="card">
            <h2>Select Department</h2>
            <p class="card-subtitle">Choose the department related to your complaint</p>

            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="ðŸ” Search departments..."
                    onkeyup="filterDepartments()">
            </div>

            <div class="dept-grid" id="departmentGrid">
                <!-- Departments will be loaded here -->
            </div>
        </div>
    </div>

    <footer>
        @2026 voice of TN, ALL Rights Reserved
    </footer>

    <script>
        const departments = [
            { name: "Agriculture Department", description: "Handles agricultural policies, farmer welfare, crop management, and rural development schemes.", icon: "ðŸŒ¾", stats: "15 Services â€¢ 8 Sections" },
            { name: "Animal Husbandry, Dairying and Fisheries Department", description: "Manages livestock development, dairy farming, fisheries, and animal health services.", icon: "ðŸ„", stats: "12 Services â€¢ 6 Sections" },
            { name: "Commercial Taxes and Registration Department", description: "Handles GST, commercial tax collection, trade licenses, and business registrations.", icon: "ðŸ’¼", stats: "20 Services â€¢ 10 Sections" },
            { name: "Co-operation, Food and Consumer Protection Department", description: "Manages cooperative societies, food distribution, consumer rights, and fair trade practices.", icon: "ðŸ¤", stats: "18 Services â€¢ 9 Sections" },
            { name: "Energy Department", description: "Oversees electricity supply, renewable energy, power distribution, and energy conservation.", icon: "âš¡", stats: "14 Services â€¢ 7 Sections" },
            { name: "Finance Department", description: "Handles state budget, financial planning, treasury operations, and fiscal policies.", icon: "ðŸ’°", stats: "25 Services â€¢ 12 Sections" },
            { name: "Health and Family Welfare Department", description: "Manages healthcare services, hospitals, medical facilities, and public health programs.", icon: "ðŸ¥", stats: "30 Services â€¢ 15 Sections" },
            { name: "Higher Education Department", description: "Oversees universities, colleges, higher education institutions, and academic policies.", icon: "ðŸŽ“", stats: "22 Services â€¢ 11 Sections" },
            { name: "Home Department", description: "Handles law and order, police administration, prison management, and internal security.", icon: "ðŸ›ï¸", stats: "16 Services â€¢ 8 Sections" },
            { name: "Industries Department", description: "Promotes industrial development, manages industrial estates, and supports MSMEs.", icon: "ðŸ­", stats: "19 Services â€¢ 9 Sections" },
            { name: "Information Technology Department", description: "Manages e-governance, digital services, IT infrastructure, and technology initiatives.", icon: "ðŸ’»", stats: "13 Services â€¢ 6 Sections" },
            { name: "Labour and Employment Department", description: "Handles labor welfare, employment schemes, industrial relations, and worker safety.", icon: "ðŸ‘·", stats: "17 Services â€¢ 8 Sections" },
            { name: "Municipal Administration and Water Supply Department", description: "Manages urban development, water supply, sewerage, and municipal governance.", icon: "ðŸ™ï¸", stats: "21 Services â€¢ 10 Sections" },
            { name: "Public Works Department", description: "Handles road construction, building maintenance, infrastructure development, and public facilities.", icon: "ðŸš§", stats: "24 Services â€¢ 12 Sections" },
            { name: "Revenue and Disaster Management Department", description: "Manages land records, disaster response, revenue collection, and emergency services.", icon: "ðŸ“‹", stats: "26 Services â€¢ 13 Sections" },
            { name: "Rural Development and Panchayat Raj Department", description: "Oversees rural development schemes, panchayat governance, and village infrastructure.", icon: "ðŸŒ¾", stats: "23 Services â€¢ 11 Sections" },
            { name: "School Education Department", description: "Manages primary and secondary education, schools, teachers, and educational policies.", icon: "ðŸ«", stats: "28 Services â€¢ 14 Sections" },
            { name: "Social Welfare Department", description: "Handles welfare schemes, social security, disability services, and community development.", icon: "ðŸ¤²", stats: "20 Services â€¢ 10 Sections" },
            { name: "Transport Department", description: "Manages vehicle registration, driving licenses, road transport, and traffic regulations.", icon: "ðŸšŒ", stats: "16 Services â€¢ 8 Sections" }
        ];

        document.addEventListener('DOMContentLoaded', function () {
            loadDepartments();
        });

        function loadDepartments() {
            const grid = document.getElementById('departmentGrid');
            grid.innerHTML = '';
            departments.forEach(dept => {
                const card = createDepartmentCard(dept);
                grid.appendChild(card);
            });
        }

        function createDepartmentCard(dept) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'dept-card';
            cardDiv.innerHTML = `
                <div class="dept-icon">${dept.icon}</div>
                <h3>${dept.name}</h3>
                <p>${dept.description}</p>
                <small>${dept.stats}</small>
                <button onclick="selectDepartment('${dept.name}')">File Complaint</button>
            `;
            return cardDiv;
        }

        function filterDepartments() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredDepts = departments.filter(dept =>
                dept.name.toLowerCase().includes(searchTerm) ||
                dept.description.toLowerCase().includes(searchTerm)
            );

            const grid = document.getElementById('departmentGrid');
            grid.innerHTML = '';
            filteredDepts.forEach(dept => {
                const card = createDepartmentCard(dept);
                grid.appendChild(card);
            });
        }

        function selectDepartment(deptName) {
            const token = localStorage.getItem('access_token');
            if (!token) {
                alert('Please login first to file a complaint.');
                window.location.href = './login.html';
                return;
            }
            window.location.href = `./complaint.html?dept=${encodeURIComponent(deptName)}`;
        }

        function logout() {
            localStorage.removeItem('access_token');
            localStorage.removeItem('token_type');
            localStorage.removeItem('user_email');
            window.location.href = '../index.html';
        }
    </script>
</body>

</html>